<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="í”„ë¡œì íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ - íš¨ìœ¨ì ì¸ í”„ë¡œì íŠ¸ ë° ì‘ì—… ê´€ë¦¬ ì†”ë£¨ì…˜" />
    
    <!-- Google í°íŠ¸ -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    
    <title>PMS - í”„ë¡œì íŠ¸ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    
    <style>
      /* ë””ë²„ê¹…ìš© ê°„ë‹¨í•œ ë¡œë”© í™”ë©´ */
      .debug-loading {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 10000;
        color: white;
        font-family: 'Inter', sans-serif;
        transition: opacity 0.3s ease-out;
      }
      
      .debug-loading.hidden {
        opacity: 0;
        pointer-events: none;
      }
      
      .debug-spinner {
        width: 40px;
        height: 40px;
        border: 3px solid rgba(255, 255, 255, 0.3);
        border-top: 3px solid white;
        border-radius: 50%;
        animation: spin 1s linear infinite;
        margin-bottom: 20px;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      .debug-info {
        position: fixed;
        top: 20px;
        right: 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 15px;
        border-radius: 8px;
        font-family: monospace;
        font-size: 12px;
        z-index: 10001;
        max-width: 300px;
      }
      
      .debug-step {
        margin: 5px 0;
        padding: 3px 0;
      }
      
      .debug-step.completed {
        color: #10b981;
      }
      
      .debug-step.error {
        color: #ef4444;
      }
      
      .debug-step.current {
        color: #f59e0b;
      }
      
      #root {
        min-height: 100vh;
        opacity: 0;
        transition: opacity 0.3s ease-in;
      }
      
      body.app-ready #root {
        opacity: 1;
      }
      
      body {
        margin: 0;
        padding: 0;
        font-family: 'Inter', sans-serif;
      }
    </style>
  </head>
  <body>
    <!-- ë””ë²„ê¹… ì •ë³´ íŒ¨ë„ -->
    <div id="debug-info" class="debug-info">
      <div><strong>ğŸ”§ ë¡œë”© ìƒíƒœ ë””ë²„ê¹…</strong></div>
      <div id="step-1" class="debug-step current">1. HTML ë¡œë“œë¨</div>
      <div id="step-2" class="debug-step">2. DOM ì¤€ë¹„ ì™„ë£Œ</div>
      <div id="step-3" class="debug-step">3. React ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ</div>
      <div id="step-4" class="debug-step">4. React ì•± ë Œë”ë§</div>
      <div id="step-5" class="debug-step">5. ì•± ì´ˆê¸°í™” ì™„ë£Œ</div>
      <div style="margin-top: 10px;">
        <button onclick="forceHideLoading()" style="background: #ef4444; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; font-size: 11px;">
          ğŸš¨ ê°•ì œ ë¡œë”© í•´ì œ
        </button>
      </div>
    </div>
    
    <!-- ê°„ë‹¨í•œ ë¡œë”© í™”ë©´ -->
    <div id="loading-screen" class="debug-loading">
      <div class="debug-spinner"></div>
      <div style="font-size: 18px; font-weight: 500; margin-bottom: 10px;">
        ğŸš€ PMS ë¡œë”© ì¤‘...
      </div>
      <div style="font-size: 14px; opacity: 0.8;">
        ë””ë²„ê¹… ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤
      </div>
      <div id="loading-timer" style="font-size: 12px; margin-top: 10px; opacity: 0.6;">
        ê²½ê³¼ ì‹œê°„: 0ì´ˆ
      </div>
    </div>

    <!-- React ì•± ë§ˆìš´íŠ¸ ì§€ì  -->
    <div id="root"></div>

    <!-- ë””ë²„ê¹… ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
      (function() {
        'use strict';
        
        let startTime = Date.now();
        let currentStep = 1;
        
        // ë””ë²„ê¹… ë¡œê·¸ í•¨ìˆ˜
        function debugLog(message, step) {
          console.log(`ğŸ”§ [Step ${step}] ${message}`);
          updateDebugStep(step, 'completed');
          if (step < 5) {
            updateDebugStep(step + 1, 'current');
          }
          currentStep = step + 1;
        }
        
        // ë””ë²„ê¹… ìŠ¤í… ì—…ë°ì´íŠ¸
        function updateDebugStep(step, status) {
          const stepElement = document.getElementById(`step-${step}`);
          if (stepElement) {
            stepElement.className = `debug-step ${status}`;
            if (status === 'completed') {
              stepElement.innerHTML = stepElement.innerHTML.replace(/^\d+\./, `${step}. âœ…`);
            } else if (status === 'error') {
              stepElement.innerHTML = stepElement.innerHTML.replace(/^\d+\./, `${step}. âŒ`);
            } else if (status === 'current') {
              stepElement.innerHTML = stepElement.innerHTML.replace(/^\d+\./, `${step}. â³`);
            }
          }
        }
        
        // íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        function updateTimer() {
          const elapsed = Math.floor((Date.now() - startTime) / 1000);
          const timerElement = document.getElementById('loading-timer');
          if (timerElement) {
            timerElement.textContent = `ê²½ê³¼ ì‹œê°„: ${elapsed}ì´ˆ`;
          }
        }
        
        // 1ì´ˆë§ˆë‹¤ íƒ€ì´ë¨¸ ì—…ë°ì´íŠ¸
        setInterval(updateTimer, 1000);
        
        // ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê¸° í•¨ìˆ˜
        function hideLoadingScreen() {
          try {
            debugLog('ë¡œë”© í™”ë©´ ìˆ¨ê¸°ëŠ” ì¤‘...', 5);
            document.getElementById('loading-screen').classList.add('hidden');
            document.body.classList.add('app-ready');
            
            // 3ì´ˆ í›„ ë””ë²„ê·¸ íŒ¨ë„ ìˆ¨ê¸°ê¸°
            setTimeout(() => {
              const debugPanel = document.getElementById('debug-info');
              if (debugPanel) {
                debugPanel.style.opacity = '0.3';
                debugPanel.style.pointerEvents = 'none';
              }
            }, 3000);
            
            console.log('âœ… ì•±ì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
          } catch (error) {
            console.error('âŒ ë¡œë”© í™”ë©´ ìˆ¨ê¸°ê¸° ì‹¤íŒ¨:', error);
            updateDebugStep(5, 'error');
          }
        }
        
        // ê°•ì œ ë¡œë”© í•´ì œ í•¨ìˆ˜
        window.forceHideLoading = function() {
          console.warn('ğŸš¨ ê°•ì œë¡œ ë¡œë”© í™”ë©´ì„ í•´ì œí•©ë‹ˆë‹¤');
          hideLoadingScreen();
        };
        
        // ì „ì—­ í•¨ìˆ˜ë¡œ ë“±ë¡
        window.hideLoadingScreen = hideLoadingScreen;
        window.onReactReady = function() {
          debugLog('React ì•± ì¤€ë¹„ ì™„ë£Œ!', 4);
          setTimeout(hideLoadingScreen, 100);
        };
        
        // DOM ì¤€ë¹„ ì™„ë£Œ
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', function() {
            debugLog('DOM ì¤€ë¹„ ì™„ë£Œ', 2);
          });
        } else {
          debugLog('DOM ì¤€ë¹„ ì™„ë£Œ', 2);
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ
        window.addEventListener('load', function() {
          debugLog('ëª¨ë“  ë¦¬ì†ŒìŠ¤ ë¡œë“œ ì™„ë£Œ', 3);
          
          // Reactê°€ 5ì´ˆ ë‚´ì— ë¡œë“œë˜ì§€ ì•Šìœ¼ë©´ ê²½ê³ 
          setTimeout(() => {
            if (currentStep < 4) {
              console.warn('âš ï¸ React ì•±ì´ 5ì´ˆ ë‚´ì— ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
              updateDebugStep(4, 'error');
            }
          }, 5000);
          
          // 10ì´ˆ í›„ ê°•ì œ í•´ì œ
          setTimeout(() => {
            if (currentStep < 5) {
              console.warn('âš ï¸ 10ì´ˆ íƒ€ì„ì•„ì›ƒ! ê°•ì œë¡œ ë¡œë”©ì„ í•´ì œí•©ë‹ˆë‹¤');
              hideLoadingScreen();
            }
          }, 10000);
        });
        
        // ì—ëŸ¬ í•¸ë“¤ë§
        window.addEventListener('error', function(event) {
          console.error('âŒ ìœˆë„ìš° ì˜¤ë¥˜:', event.error);
          updateDebugStep(currentStep, 'error');
          setTimeout(hideLoadingScreen, 2000);
        });
        
        // ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€
        window.addEventListener('unhandledrejection', function(event) {
          console.error('âŒ Promise ê±°ë¶€:', event.reason);
          updateDebugStep(currentStep, 'error');
        });
        
        debugLog('ë””ë²„ê¹… ìŠ¤í¬ë¦½íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ', 1);
      })();
    </script>
  </body>
</html>